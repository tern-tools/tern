# Release 2.9.0

## Summary
This release contains a handful of exciting new features. First, Tern is now able to run in an unprivileged container. This is beneficial from a security standpoint on platforms that do not allow privileged containers to run. It also removes the dependency on the overlay2fs storage driver. Next, there is now source package information reported in the JSON and YAML formats for rpm and dpkg based package managers. Source package information can be helpful when looking up known vulnerabilities or CVEs for packages. Additionally, Tern will now report Debian package license information in the default report table instead of users having to look at other formats like JSON for this information. Lastly, Tern removed its dependency on Docker for pulling containers in favor of [Skopeo](https://github.com/containers/skopeo) (the Docker requirement still exists for Dockerfile analysis). This huge change brings Tern one step closer to running on Kubernetes since it was [announced](https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/) that the Docker container runtime would be removed in favor of other runtimes that use [CRI](https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/) created for K8s.

## New Features
* [Run Tern in an unprivileged container](https://github.com/tern-tools/tern/issues/1082): Tern now runs in an unprivileged container. This is possible due to a new method of applying the diff filesystem layers using bulk copying of the files and directories into the merge directory rather than using a storage driver like overlay2 or fuse as was previously used. The overlay2 and fuse drivers are still available to maintain backwards compatability by using the`--driver` command line option. 
* [Add source package information to reports](https://github.com/tern-tools/tern/issues/1083): Tern now reports source package name (`src_name`) and version (`src_version`) in the JSON and YAML reports. This source package information can be fed to security scanners to look up known vulnerabilities.
* [Use skopeo to pull container images](https://github.com/tern-tools/tern/issues/948): Tern now uses skopeo to pull container images for container analysis. This removes the dependency on Docker to pull container images.
* [Report Debian package licenses in default report](https://github.com/tern-tools/tern/pull/1029): Tern now reports Debian package licenses in the default report table for easy viewing.

## Bug Fixes
* [Fix deprecated values in setup.cfg](https://github.com/tern-tools/tern/issues/1084)
* [Fix SPDX JSON format to match SPDX JSON schema](https://github.com/tern-tools/tern/issues/1064)
* [Add 'document DESCRIBES container' relationship to SPDX report](https://github.com/tern-tools/tern/issues/1079)

## Technical Debt
* [Run ScanCode with n-1 cores](https://github.com/tern-tools/tern/issues/1062)
* [Remove unused clean_image_tars function](https://github.com/tern-tools/tern/issues/1044)
* [Direct check for key in command_lib](https://github.com/tern-tools/tern/issues/1041)
* [Direct check for key in os_release](https://github.com/tern-tools/tern/issues/1043)
* [Change SPDX pkg download location to NOASSERTION](https://github.com/tern-tools/tern/issues/1039)
* [Improve error message when docker is not running](https://github.com/tern-tools/tern/issues/1073)


## Future Work
* Add source package information to SPDX and CycloneDX reports
* Investigate running Tern in a Kubernetes admission controller

## Changelog
Note: This changelog will not include these release notes

Changelog generated by command: `git log --pretty=format:"%h %s" v2.8.0..HEAD`

```
e16a468 Use Skopeo to pull container images
3bdbd08 formats: Modify layer title based on manifest
3a0ac50 Modify environments to install skopeo
0891287 Change -i option to use OCIImage
1644456 Replace get_untar_dir with ImageLayer method
e340f66 classes: Add OCIImage class and use image_layout
6fcdcb9 classes: Move get_untar_dir to ImageLayer
fad5fb1 fix: unmount rootfs only for fuse and overlay2
0b87b0c Collect dpkg and rpm source pkg info
94aacb1 Collect dpkg and rpm source information
5b4bbde Add source package info to package data model
5011db0 Enable Tern to run in an unprivileged container
fb160a0 Update README.md with new Docker instructions
4fcae9b Use the default driver in Dockerfile
6c0d1e9 Fix application for multiple cached layers
ab13f1c Enable multi-layer analysis with no mount
7bcbf6c Remove unnecessary mounting and unshare commands
3911d04 classes: Add new property is_whiteout
1551162 Allow whiteout files to be accessed by fs_hash.sh
aecba38 Multiple checks for keys in check_sourcable func
f9d9669 updating setup.cfg fields
38d5c76 Report Debian package licenses in default report
9751f1b Add SPDX "document DESCRIBES image" relationship
ff9d71a Add DockerException when daemon not running
fd94b38 Fix for SPDX JSON format to match SPDX JSON schema
c3938c7 Scancode should run n-1 core
9534ac1 Remove unused clean_image_tars function
a3e76cd Change SPDX pkg download location to NOASSERTION
87e7cdd Remove unused functions from lock.py
99fdb5f Direct check for key in command_lib['snippets']
ce1c6d2 Update VS Code documentation for Mac/Windows
fcb367b Direct check for key in command['base'] dictionary
55a8a1e Change package download location to NOASSERTION
956a5e6 Fix CI status badge
33ffbeb Direct check for key in os_release_dict
```

## Contributors
```
ashmaajmera samaiya.ashma@gmail.com
Debbie Leung dsl2162@columbia.edu
Hannah Lumapas lumapas.h@gmail.com
Jason Hall jasonhall@redhat.com
jayeritz jamila.ritter@rutgers.edu
Kerin Pithawala kerinpithawala7@gmail.com
Mukul Taneja mtaneja@vmware.com
sayantani11 ii.sayantani.ii@gmail.com
Vini Parimala vini.parimala@verizonmedia.com
vsoch vsoch@users.noreply.github.com
```


## Contact the Maintainers

Nisha Kumar: nishak@vmware.com
Rose Judge: rjudge@vmware.com
